<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Reward — Great Choice!</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    html, body { margin:0; height:100%; background:#000; font-family: system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif; }
    #player { display:none; }

    .overlay {
      position: fixed; inset: 0; display: grid;
      grid-template-rows: 1fr auto auto auto 1fr;
      justify-items: center; align-items: center;
      background:#000; opacity:1; pointer-events:auto; padding: 0 6vw; text-align: center;
    }
    .line1 {
      color:#fff; font-weight:700; font-size: clamp(22px, 3.5vw, 42px);
      letter-spacing: 0.2px; margin-bottom: 12px;
    }
    .line2 {
      color:#cfd2d6; font-weight:500; font-size: clamp(18px, 2.4vw, 28px);
      letter-spacing: 0.15px; margin-bottom: 22px;
    }
    .cta {
      padding: 14px 22px; border-radius: 12px; border: 1px solid rgba(255,255,255,0.35);
      background: rgba(255,255,255,0.06); color:#fff; font-size: 18px; cursor: pointer; margin-top: 10px;
      transition: transform .2s ease;
    }
    .cta:hover { transform: translateY(-1px); }

    .sound-tip { color:#9aa0a6; font-size: 13px; margin-top: 10px; }
    .sound-tip.hidden { display:none; }

    .gesture-catcher { position: fixed; inset: 0; background: transparent; cursor: pointer; }

    .tiny { position: fixed; top: 10px; right: 12px; z-index: 3; }
    .tiny a {
      color:#9aa0a6; text-decoration:none; font-size:12px; padding:4px 6px; border:1px solid rgba(255,255,255,0.2); border-radius:6px;
      background: rgba(0,0,0,0.4);
    }
    .tiny a:hover { color:#fff; border-color: rgba(255,255,255,0.4); }

    #fade{position:fixed;inset:0;background:#000;opacity:0;pointer-events:none;transition:opacity 550ms ease;z-index:9999}
    #fade.show{opacity:1;pointer-events:auto}
  </style>
</head>
<body>
  <!-- Audio -->
  <audio id="player" preload="auto"></audio>

  <!-- Reward overlay -->
  <div class="overlay">
    <div></div>
    <div class="line1">You made the right call — lungs clear, mind clear.</div>
    <div class="line2">Let's look inside the body to see what you avoided.</div>
    <button id="goBody" class="cta" aria-label="Enter the Body Journey">Enter the Body Journey</button>
    <div id="soundTip" class="sound-tip">Sound might be blocked — click anywhere or press any key to enable.</div>
    <div></div>
  </div>

  <!-- Invisible, full-screen gesture catcher -->
  <div id="catcher" class="gesture-catcher"></div>

  <!-- Dev helper -->
  <div class="tiny"><a href="/index.html">Back</a></div>

  <!-- Fade overlay -->
  <div id="fade"></div>

  <script>
    (function () {
      const player   = document.getElementById('player');
      const goBody   = document.getElementById('goBody');
      const soundTip = document.getElementById('soundTip');
      const catcher  = document.getElementById('catcher');
      const fadeEl   = document.getElementById('fade');

      // Your audio + next scene
      const CHEER_SRC = 'reward_cheer.mp3';

      // ✅ CORRECTED: Points to the new mouth_final.html in journeys folder
      const BODY_URL  = '../journeys/mouth_final.html';

      function setSrc(src) {
        player.pause();
        player.removeAttribute('src'); player.load();
        player.src = src + '?v=' + Date.now(); // cache-bust
        player.load();
      }

      function hideTipWhenPlaying() {
        soundTip.classList.add('hidden');
        catcher.style.display = 'none';
      }

      player.addEventListener('playing', hideTipWhenPlaying);

      (async () => {
        setSrc(CHEER_SRC);
        player.volume = 1.0;
        try { await player.play(); } catch (e) { /* autoplay blocked; wait for gesture */ }
      })();

      async function tryEnableSound() { try { await player.play(); } catch {} }
      catcher.addEventListener('pointerdown', tryEnableSound);
      window.addEventListener('keydown', tryEnableSound);

      function fadeAndGo(url){
        try{
          fadeEl.classList.add('show');
          setTimeout(()=>{ window.location.href = url + '?v=' + Date.now(); }, 600);
        }catch(_){
          window.location.href = url + '?v=' + Date.now();
        }
      }

      goBody.addEventListener('click', () => {
        try { player.pause(); } catch {}
        fadeAndGo(BODY_URL);
      });
    })();
  </script>
</body>
</html>